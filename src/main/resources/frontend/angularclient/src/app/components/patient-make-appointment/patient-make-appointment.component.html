<div class="container details">
    <h1 class="text-center m-5">Make an Appointment</h1>

    <div class="mb-3">
        <textarea class="form-control" id="description" rows="5" placeholder="What would you like to see the doctor for?" [(ngModel)]="description"></textarea>
    </div>

    <div class="row mt-3 p-3">
        <div class="col text-center">
            <label class="p-2 bg-info" for="date">Select a date and time for your appointment ðŸ˜¡</label>
        </div>
    </div>

    <div class="row p-3 text-center">
        <div class="col">
            <input name="date" id="date" type="date" class="p-3" [(ngModel)]="selectedDate" [max]="max" [min]="min" onkeydown="return false" (change)="enforceBoundsAndCheckForError(); updateApptTimeslots()">
        </div>
    </div> 

    <div class="fadeInDown" *ngIf="selectedDate >= min && selectedDate <= max">
        <div class="row">
            <table class="table table-striped mb-3">
                <thead>
                    <tr>
                        <th scope="col" style="width: 5%"></th>
                        <th scope="col" style="width: 30%">Timeslot</th>
                        <th scope="col" style="width: 65%">Date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let appt of appts">
                        <td><input class="form-check-input" name="time-slots" type="radio" value="{{appt}}" [(ngModel)]="selectedAppt" [disabled]="appt[2] == 'disabled'" (change) = "this.selectedDr = ''; updateDrAvailibility()"></td>
                        <td [ngClass]="appt[2] == 'disabled' ? 'text-black-50' : ''">{{ appt[0] }}</td>
                        <td [ngClass]="appt[2] == 'disabled' ? 'text-black-50' : ''">{{ appt[1] }}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div div class="row fadeInDown" *ngIf="selectedAppt">
            <table class="table table-striped mb-3">
                <thead>
                    <tr>
                        <th scope="col" style="width: 5%"></th>
                        <th scope="col">Doctor</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let doctor of doctors">
                        <td><input class="form-check-input" name="doctors" type="radio" value="{{ doctor[0] }}" [(ngModel)]="selectedDr" [disabled]="doctor[2] == 'disabled'"></td>
                        <td [ngClass]="doctor[2] == 'disabled' ? 'text-black-50' : ''">Dr. {{ doctor[1] }}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="row text-center" *ngIf="selectedDr">
            <div class="col">
                <button class="btn btn-primary" (click)="makeAppt()">Submit</button>
            </div>
        </div>
    </div>
</div>